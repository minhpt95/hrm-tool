<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.9.xsd"
        objectQuotingStrategy="QUOTE_ONLY_RESERVED_WORDS">
    <changeSet id="1671173771382-1" author="minhp (generated)">
        <createTable tableName="cron">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="created_by" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="created_time" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="modified_by" type="BIGINT"/>
            <column name="modified_time" type="datetime"/>
            <column name="cron_code" type="VARCHAR(255)">
                <constraints unique="true"/>
            </column>
            <column name="cron_expression" type="VARCHAR(255)"/>
            <column name="cron_name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1671173771382-2" author="minhp (generated)">
        <createTable tableName="master_data">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="created_by" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="created_time" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="modified_by" type="BIGINT"/>
            <column name="modified_time" type="datetime"/>
            <column name="active" type="BIT(1)"/>
            <column name="code" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(255)"/>
            <column name="type" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1671173771382-3" author="minhp (generated)">
        <createTable tableName="privileges">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="created_by" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="created_time" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="modified_by" type="BIGINT"/>
            <column name="modified_time" type="datetime"/>
            <column name="privilege" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1671173771382-4" author="minhp (generated)">
        <createTable tableName="projects">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="created_by" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="created_time" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="modified_by" type="BIGINT"/>
            <column name="modified_time" type="datetime"/>
            <column name="end_time" type="datetime"/>
            <column name="is_delete" type="BIT(1)"/>
            <column name="name" type="VARCHAR(255)"/>
            <column name="project_status" type="VARCHAR(255)"/>
            <column name="manager_user" type="BIGINT"/>
            <column name="description" type="VARCHAR(255)"/>
            <column name="start_time" type="datetime"/>
        </createTable>
    </changeSet>
    <changeSet id="1671173771382-5" author="minhp (generated)">
        <createTable tableName="refresh_token">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="created_by" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="created_time" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="modified_by" type="BIGINT"/>
            <column name="modified_time" type="datetime"/>
            <column name="expiry_date" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="token" type="VARCHAR(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="user_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet id="1671173771382-6" author="minhp (generated)">
        <createTable tableName="requests">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="created_by" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="created_time" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="modified_by" type="BIGINT"/>
            <column name="modified_time" type="datetime"/>
            <column name="from_date" type="datetime"/>
            <column name="is_multiple_day" type="BIT(1)"/>
            <column name="request_reason" type="VARCHAR(255)"/>
            <column name="request_title" type="VARCHAR(255)"/>
            <column name="status" type="VARCHAR(255)"/>
            <column name="to_date" type="datetime"/>
            <column name="type_day_off" type="VARCHAR(255)"/>
            <column name="requester_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet id="1671173771382-7" author="minhp (generated)">
        <createTable tableName="roles">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="created_by" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="created_time" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="modified_by" type="BIGINT"/>
            <column name="modified_time" type="datetime"/>
            <column name="role" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1671173771382-8" author="minhp (generated)">
        <createTable tableName="roles_privileges">
            <column name="role_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="privilege_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1671173771382-9" author="minhp (generated)">
        <createTable tableName="users">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="created_by" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="created_time" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="modified_by" type="BIGINT"/>
            <column name="modified_time" type="datetime"/>
            <column name="access_token" type="VARCHAR(255)"/>
            <column name="current_address" type="VARCHAR(255)"/>
            <column name="email" type="VARCHAR(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="identity_card" type="VARCHAR(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="is_enabled" type="BIT(1)"/>
            <column name="name" type="VARCHAR(255)"/>
            <column name="password" type="VARCHAR(255)"/>
            <column name="permanent_address" type="VARCHAR(255)"/>
            <column name="phone_number1" type="VARCHAR(255)"/>
            <column name="position" type="VARCHAR(255)"/>
            <column name="token_status" type="BIT(1)"/>
            <column name="level" type="VARCHAR(255)"/>
            <column name="program_language" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1671173771382-10" author="minhp (generated)">
        <createTable tableName="users_projects">
            <column name="user_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="project_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1671173771382-11" author="minhp (generated)">
        <createTable tableName="users_roles">
            <column name="user_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="role_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1671173771382-12" author="minhp (generated)">
        <createIndex indexName="FK2o0jvgh89lemvvo17cbqvdxaa" tableName="users_roles">
            <column name="user_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1671173771382-13" author="minhp (generated)">
        <createIndex indexName="FK5duhoc7rwt8h06avv41o41cfy" tableName="roles_privileges">
            <column name="privilege_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1671173771382-14" author="minhp (generated)">
        <createIndex indexName="FK629oqwrudgp5u7tewl07ayugj" tableName="roles_privileges">
            <column name="role_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1671173771382-15" author="minhp (generated)">
        <createIndex indexName="FK944chdoq944skeocne79eu904" tableName="projects">
            <column name="manager_user"/>
        </createIndex>
    </changeSet>
    <changeSet id="1671173771382-16" author="minhp (generated)">
        <createIndex indexName="FKen924y69h6d6chaojjgqfaow8" tableName="users_projects">
            <column name="user_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1671173771382-17" author="minhp (generated)">
        <createIndex indexName="FKeoax2t4j9i61p9lmon3009tr4" tableName="requests">
            <column name="requester_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1671173771382-18" author="minhp (generated)">
        <createIndex indexName="FKj6m8fwv7oqv74fcehir1a9ffy" tableName="users_roles">
            <column name="role_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1671173771382-19" author="minhp (generated)">
        <createIndex indexName="FKjtx87i0jvq2svedphegvdwcuy" tableName="refresh_token">
            <column name="user_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1671173771382-20" author="minhp (generated)">
        <createIndex indexName="FKkoh0xgfur21fdanq862b3qx7n" tableName="users_projects">
            <column name="project_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1671173771382-21" author="minhp (generated)">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="users_roles"
                                 constraintName="FK2o0jvgh89lemvvo17cbqvdxaa" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
    <changeSet id="1671173771382-22" author="minhp (generated)">
        <addForeignKeyConstraint baseColumnNames="privilege_id" baseTableName="roles_privileges"
                                 constraintName="FK5duhoc7rwt8h06avv41o41cfy" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="id" referencedTableName="privileges"/>
    </changeSet>
    <changeSet id="1671173771382-23" author="minhp (generated)">
        <addForeignKeyConstraint baseColumnNames="role_id" baseTableName="roles_privileges"
                                 constraintName="FK629oqwrudgp5u7tewl07ayugj" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="id" referencedTableName="roles"/>
    </changeSet>
    <changeSet id="1671173771382-24" author="minhp (generated)">
        <addForeignKeyConstraint baseColumnNames="manager_user" baseTableName="projects"
                                 constraintName="FK944chdoq944skeocne79eu904" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
    <changeSet id="1671173771382-25" author="minhp (generated)">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="users_projects"
                                 constraintName="FKen924y69h6d6chaojjgqfaow8" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
    <changeSet id="1671173771382-26" author="minhp (generated)">
        <addForeignKeyConstraint baseColumnNames="requester_id" baseTableName="requests"
                                 constraintName="FKeoax2t4j9i61p9lmon3009tr4" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
    <changeSet id="1671173771382-27" author="minhp (generated)">
        <addForeignKeyConstraint baseColumnNames="role_id" baseTableName="users_roles"
                                 constraintName="FKj6m8fwv7oqv74fcehir1a9ffy" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="id" referencedTableName="roles"/>
    </changeSet>
    <changeSet id="1671173771382-28" author="minhp (generated)">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="refresh_token"
                                 constraintName="FKjtx87i0jvq2svedphegvdwcuy" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
    <changeSet id="1671173771382-29" author="minhp (generated)">
        <addForeignKeyConstraint baseColumnNames="project_id" baseTableName="users_projects"
                                 constraintName="FKkoh0xgfur21fdanq862b3qx7n" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="id" referencedTableName="projects"/>
    </changeSet>

</databaseChangeLog>